<div class="popover" 
     tabindex="-1" 
     style="min-width:400px" 
     ng-controller="externalDatasourcesController as externalDatasourcesController"
     id="externalDatasourcesPopover"
     name="externalDatasourcesPopover">
    <div class="arrow"></div>
    <h1 class="popover-title">
        <button type="button" 
                class="close" 
                ng-click="$hide()">
            <span class="fa fa-close"></span>
        </button>
        <big><strong>Externe Datenquellen</strong></big></h1>

    <!--<div class="panel-heading">
        <button type="button" 
                class="close" 
                ng-click="$hide()">
            <span class="fa fa-close"></span>
        </button>
        <h4>Externe Datenquellen</h4>
    </div>-->
    <div class="popover-content">

        <uib-accordion close-others="false">
            <!-- Vorkonfigurierte globale Datenquellen-->
            <div uib-accordion-group  
                 ng-init="globalDatasourcesOpen = true" 
                 is-open="globalDatasourcesOpen"
                 ng-class="{'text-muted': isDisabled}">
                <uib-accordion-heading>
                    <div uib-accordion-header 
                         style="margin:0px;padding:8px;background-color:#c6e1ec;color:#3d7489">
                        Vorkonfigurierte globale Datenquellen
                        <i class="pull-right glyphicon" 
                           ng-class="{'glyphicon-chevron-down': globalDatasourcesOpen, 'glyphicon-chevron-up': !globalDatasourcesOpen}">
                        </i>
                    </div>
                </uib-accordion-heading>
                <div class="checkbox" style="width:100%;clear:right"
                     ng-repeat="globalDatasource in externalDatasourcesController.globalDatasources">
                    <label class="form-check-label">
                        <input 
                            class="form-check-input"
                            type="checkbox"
                            name="{{globalDatasource.name}}"
                            value="globalDatasource"
                            ng-checked="globalDatasource.$layer && globalDatasource.$layer.$selected"
                            ng-click="externalDatasourcesController.toggleGlobalDatasourceSelection(globalDatasource)"> 
                        {{globalDatasource.name}}
                    </label>
                </div>
            </div>

            <!-- Eigene lokale Datenquellen-->
            <div uib-accordion-group  ng-init="localDatasourcesOpen = true" is-open="localDatasourcesOpen">
                <uib-accordion-heading>
                    <div uib-accordion-header 
                         style="margin:0px;padding:8px;background-color:#c6e1ec;color:#3d7489">
                        Eigene lokale Datenquellen
                        <i class="pull-right glyphicon" 
                           ng-class="{'glyphicon-chevron-down': localDatasourcesOpen, 'glyphicon-chevron-up': !localDatasourcesOpen}">

                        </i>
                    </div>
                </uib-accordion-heading>
                <div class="checkbox" style="width:100%;clear:right"
                     ng-repeat="localDatasource in externalDatasourcesController.localDatasources">
                    <label class="form-check-label">
                        <input 
                            class="form-check-input"
                            type="checkbox"
                            name="{{localDatasource.name}}"
                            value="localDatasource"
                            ng-checked="localDatasource.$layer && localDatasource.$layer.$selected"
                            ng-click="externalDatasourcesController.toggleGlobalDatasourceSelection(localDatasource)"> 
                        {{localDatasource.name}}
                    </label>
                     <a class="btn btn-icon pull-right"
                       title="Lokale Datenquelle entfernen"
                       ng-click="externalDatasourcesController.removeLocalDatasource(localDatasource)">
                        <span class="fa fa-minus-circle pull-right" style="color:red"></span>
                    </a>
                </div>
                <a class="btn btn-icon pull-right"
                   title="Neue lokale Datenquelle hinzufÃ¼gen"
                   ng-click="externalDatasourcesController.addLocalDatasource(localDatasource)">
                    <span class="fa fa-plus-circle" style="color:green"></span>
                </a>
            </div>
        </uib-accordion>
    </div>
    <div class="panel-footer">
        <button type="button" 
                class="btn btn-default" 
                ng-click="$hide()">
            OK
        </button><!--
        <button type="button" 
                class="btn btn-default" 
                ng-click="popover.saved = true;$hide()">
            Abbrechen
        </button>-->
    </div>
</div>

